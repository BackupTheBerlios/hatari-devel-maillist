<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] HD6301 emu : news
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2009q3/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20HD6301%20emu%20%3A%20news&In-Reply-To=%3C4AA270C7.2020902%40free.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000660.html">
   <LINK REL="Next"  HREF="000662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] HD6301 emu : news</H1>
    <B>Laurent Sallafranque</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20HD6301%20emu%20%3A%20news&In-Reply-To=%3C4AA270C7.2020902%40free.fr%3E"
       TITLE="[hatari-devel] HD6301 emu : news">laurent.sallafranque at free.fr
       </A><BR>
    <I>Sat Sep  5 16:08:07 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000660.html">[hatari-devel] HD6301 emu : news
</A></li>
        <LI>Next message: <A HREF="000662.html">[hatari-devel] HD6301 emu : news
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#661">[ date ]</a>
              <a href="thread.html#661">[ thread ]</a>
              <a href="subject.html#661">[ subject ]</a>
              <a href="author.html#661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> &gt; I guess for the interface with the keyboard you're using the articles 
that were published in french ST Magazine ? I think this will require 
some work and some tweaking to find the correct rate to run 6301 code to 
interface correctly with the serial port at fffc00/fffc02.

I haven't really had a look at this part yet. I'll look at St Mags. (Do 
you know the mag numbers ?)


 &gt; Also, a 6301 disassembler that could be called from the debugger 
would be nice, to disassemble either the 6301 ROM or the RAM (I used an 
old program called 'dasmx' when I added fake 6301 support, but having 
this directly in Hatari would be better)

That's what I think at. I've started to add a memory disassembler (which 
seems to work) and a registers  display. I'll add the &quot;register change&quot; 
and &quot;memory change&quot; soon.

I'd like to add this to Hatari debugger (with dsp and 680x0). Functions 
could be :
hd
hm
hc
hr
...


 &gt; In the end, this will be really nice to have a real 6301 support.

Yep, I think too.
I think we should add to the main menu of hatari a choice :
Either use the fast 6301 emu (your fake code) or load a 6301 ROM (in 
this case, my 6301 emulator would be called).


 &gt; Just having a look at the code, I see the same code is used many 
times to compute the CCR flags, for example in asrb/aslb/rolb, or in 
anda_ind/bita_ind. I was wondering, perhaps it could be possible to use 
a macro or a generic CCR function to group a few common cases at the 
same place, thus not duplicating some nearly identical code ?

I chose not to implement too much functions (for speed and readability).
I'm not against macros as long as code is still easy to read and debug.

Don't hesitate to help me if you want by adding the macros you think at.

I'd like some help with the BCD function (my scolar knowelges about this 
are quite far now :)
Also, some help with Hatari's interfacing would be nice.

Regards,

Laurent


&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> thanks for the work.
</I>&gt;<i>
</I>&gt;<i> I guess for the interface with the keyboard you're using the articles 
</I>&gt;<i> that were published in french ST Magazine ? I think this will require 
</I>&gt;<i> some work and some tweaking to find the correct rate to run 6301 code 
</I>&gt;<i> to interface correctly with the serial port at fffc00/fffc02.
</I>&gt;<i>
</I>&gt;<i> In the end, this will be really nice to have a real 6301 support.
</I>&gt;<i>
</I>&gt;<i> Also, a 6301 disassembler that could be called from the debugger would 
</I>&gt;<i> be nice, to disassemble either the 6301 ROM or the RAM (I used an old 
</I>&gt;<i> program called 'dasmx' when I added fake 6301 support, but having this 
</I>&gt;<i> directly in Hatari would be better)
</I>&gt;<i>
</I>&gt;<i> Just having a look at the code, I see the same code is used many times 
</I>&gt;<i> to compute the CCR flags, for example in asrb/aslb/rolb, or in 
</I>&gt;<i> anda_ind/bita_ind. I was wondering, perhaps it could be possible to 
</I>&gt;<i> use a macro or a generic CCR function to group a few common cases at 
</I>&gt;<i> the same place, thus not duplicating some nearly identical code ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Nicolas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000660.html">[hatari-devel] HD6301 emu : news
</A></li>
	<LI>Next message: <A HREF="000662.html">[hatari-devel] HD6301 emu : news
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#661">[ date ]</a>
              <a href="thread.html#661">[ thread ]</a>
              <a href="subject.html#661">[ subject ]</a>
              <a href="author.html#661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
