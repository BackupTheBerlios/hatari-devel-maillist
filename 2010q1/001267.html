<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] CMake build system
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2010q1/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20CMake%20build%20system&In-Reply-To=%3Cc1a0d1561001171323p258f480ahe47273d8fd295c8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001266.html">
   <LINK REL="Next"  HREF="001269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] CMake build system</H1>
    <B>Christer Solskogen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20CMake%20build%20system&In-Reply-To=%3Cc1a0d1561001171323p258f480ahe47273d8fd295c8%40mail.gmail.com%3E"
       TITLE="[hatari-devel] CMake build system">christer.solskogen at gmail.com
       </A><BR>
    <I>Sun Jan 17 22:23:36 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001266.html">[hatari-devel] CMake build system
</A></li>
        <LI>Next message: <A HREF="001269.html">[hatari-devel] CMake build system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1267">[ date ]</a>
              <a href="thread.html#1267">[ thread ]</a>
              <a href="subject.html#1267">[ subject ]</a>
              <a href="author.html#1267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jan 17, 2010 at 10:13 PM, Christer Solskogen
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">christer.solskogen at gmail.com</A>&gt; wrote:
&gt;&gt;<i> D'oh! Yet another command that is only defined by an optional cmake module... and I forgot to include the corresponding module in the CMakeList.txt :-(
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It should be fixed now in the hg repository on the server...
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Looks fine on Mac OS X too!
</I>
I was a bit too fast on that one.
Using the old build system &quot;hg purge --all &amp;&amp; rm Makefile* &amp;&amp; hg up -C
&amp;&amp; make&quot; it builds fine. Using the CMake-method I get this:
[ 99%] Building C object src/CMakeFiles/hatari.dir/zip.c.o
Linking C executable hatari
ld: library not found for -lSDLmain
collect2: ld returned 1 exit status
make[2]: *** [src/hatari] Error 1
make[1]: *** [src/CMakeFiles/hatari.dir/all] Error 2
make: *** [all] Error 2

Relevant output from the &quot;old&quot; method:
gcc  audio.o avi_record.o bios.o blitter.o cart.o cfgopts.o
configuration.o options.o createBlankImage.o change.o control.o
cycInt.o cycles.o dialog.o dim.o dmaSnd.o fdc.o file.o floppy.o
gemdos.o hd6301_cpu.o hdc.o ide.o ikbd.o ioMem.o ioMemTabST.o
ioMemTabSTE.o ioMemTabTT.o ioMemTabFalcon.o joy.o keymap.o m68000.o
main.o midi.o memorySnapShot.o mfp.o msa.o paths.o psg.o printer.o
rs232.o reset.o rtc.o scandir.o st.o stMemory.o screen.o
screenSnapShot.o shortcut.o sound.o spec512.o statusbar.o str.o tos.o
unzip.o utils.o vdi.o video.o wavFormat.o xbios.o ymFormat.o zip.o
uae-cpu/cpu68k.a debug/debug.a falcon/falcon.a gui-sdl/gui-sdl.a
-framework CoreAudio -framework AudioToolbox -framework AudioUnit
-framework Carbon -L/opt/local/lib -lportaudio   -L/opt/local/lib
-lpng12 -lz   -L/opt/local/lib -lSDLmain -lSDL -Wl,-framework,Cocoa
-L/opt/local/lib -lX11 -lXau -lXdmcp   -lz   -o hatari
make -C tools/hmsa/
gcc -g -Wmissing-prototypes -Wstrict-prototypes -Wsign-compare
-Wbad-function-cast -Wcast-qual  -Wpointer-arith -Wall -Wwrite-strings
 -O2  -I/opt/local/include/SDL -D_GNU_SOURCE=1 -D_THREAD_SAFE -I../..
-I../../src/includes -I../../src/debug -I../../src/uae-cpu  -c -o
hmsa.o hmsa.c
gcc -g -Wmissing-prototypes -Wstrict-prototypes -Wsign-compare
-Wbad-function-cast -Wcast-qual  -Wpointer-arith -Wall -Wwrite-strings
 -O2  -I/opt/local/include/SDL -D_GNU_SOURCE=1 -D_THREAD_SAFE -I../..
-I../../src/includes -I../../src/debug -I../../src/uae-cpu  -c -o
floppy.o floppy.c
gcc  -I/opt/local/include/SDL -D_GNU_SOURCE=1 -D_THREAD_SAFE -I../..
-I../../src/includes -I../../src/debug -I../../src/uae-cpu -g
-Wmissing-prototypes -Wstrict-prototypes -Wsign-compare
-Wbad-function-cast -Wcast-qual  -Wpointer-arith -Wall -Wwrite-strings
 -O2 hmsa.o floppy.o ../../src/msa.o ../../src/dim.o ../../src/st.o
../../src/file.o ../../src/unzip.o ../../src/zip.o -lz   -o hmsa

-- 
chs

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001266.html">[hatari-devel] CMake build system
</A></li>
	<LI>Next message: <A HREF="001269.html">[hatari-devel] CMake build system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1267">[ date ]</a>
              <a href="thread.html#1267">[ thread ]</a>
              <a href="subject.html#1267">[ subject ]</a>
              <a href="author.html#1267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
