<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Potential bug with MSA disk images
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2009q1/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Potential%20bug%20with%20MSA%20disk%20images&In-Reply-To=%3C200901192310.45718.eerot%40users.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000072.html">
   <LINK REL="Next"  HREF="000074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Potential bug with MSA disk images</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Potential%20bug%20with%20MSA%20disk%20images&In-Reply-To=%3C200901192310.45718.eerot%40users.berlios.de%3E"
       TITLE="[hatari-devel] Potential bug with MSA disk images">eerot at users.berlios.de
       </A><BR>
    <I>Mon Jan 19 22:10:45 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000072.html">[hatari-devel] Preparation for a new release
</A></li>
        <LI>Next message: <A HREF="000074.html">[hatari-devel] Potential bug with MSA disk images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66">[ date ]</a>
              <a href="thread.html#66">[ thread ]</a>
              <a href="subject.html#66">[ subject ]</a>
              <a href="author.html#66">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Sunday 18 January 2009, Thomas Huth wrote:
&gt;<i> &gt; &gt; Sorry, seems like I've messed that part up :-( My apologies to
</I>&gt;<i> &gt; &gt; everybody, I hope there hasn't been a real data loss yet!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think this was actually from my file handling changes (I think they
</I>&gt;<i> &gt; were for 1.1, not 1.0?) with which it was possible to cancel the
</I>&gt;<i> &gt; changes done in the Options dialog.  I had overlooked this kind of
</I>&gt;<i> &gt; issue, sorry about that.
</I>&gt;<i>
</I>&gt;<i> That was also my first thought, but actually it was me who introduced
</I>&gt;<i> the bug with changeset 5d29291777ec (and my current bug fix mainly
</I>&gt;<i> reverts that patch).
</I>
I noticed that the the floppy buffers are saved to memory snapshots.
Loading such a snapshot and then ejecting the disk would also corrupt
the disk if its contents were changed in the meanwhile.

Couldn't the disk contents be flushed to the image when memory snapshot is
saved and the buffer be loaded from the disk image after memory snapshot is
loaded?


Btw. If one were to implement saving also to disk images within ZIP files,
then also the ZipPath would need to be stored along with disk path.  IMHO it
would be better to remove whole ZIP support though as it significantly
complicates the file selector / disk image handling and is incomplete.  Does
somebody use Zip files?


&gt;<i> &gt; Is this bad enough to warrant Hatari v1.3 (as you've already added
</I>&gt;<i> &gt; midi in/through and IDE disk features) soonish?
</I>&gt;<i>
</I>&gt;<i> Yes, I think we urgently should publish a new version with that fix,
</I>&gt;<i> since this can really cause ugly data losses... let's target next
</I>&gt;<i> weekend, would that be OK for everybody?
</I>
Would one week more be too much?  Have all the changes done so far
already been tested properly &amp; stabilized?


	- Eero

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000072.html">[hatari-devel] Preparation for a new release
</A></li>
	<LI>Next message: <A HREF="000074.html">[hatari-devel] Potential bug with MSA disk images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66">[ date ]</a>
              <a href="thread.html#66">[ thread ]</a>
              <a href="subject.html#66">[ subject ]</a>
              <a href="author.html#66">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
