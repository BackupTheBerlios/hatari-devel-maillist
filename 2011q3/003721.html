<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Moai demo as regressed a lot since hatari 1.4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q3/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Moai%20demo%20as%20regressed%20a%20lot%20since%20hatari%201.4&In-Reply-To=%3C4E1E97B7.7070703%40free.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003795.html">
   <LINK REL="Next"  HREF="003722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Moai demo as regressed a lot since hatari 1.4</H1>
    <B>Laurent Sallafranque</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Moai%20demo%20as%20regressed%20a%20lot%20since%20hatari%201.4&In-Reply-To=%3C4E1E97B7.7070703%40free.fr%3E"
       TITLE="[hatari-devel] Moai demo as regressed a lot since hatari 1.4">laurent.sallafranque at free.fr
       </A><BR>
    <I>Thu Jul 14 09:16:07 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003795.html">[hatari-devel] Froggies over the fence
</A></li>
        <LI>Next message: <A HREF="003722.html">[hatari-devel] Moai demo as regressed a lot since hatari 1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3721">[ date ]</a>
              <a href="thread.html#3721">[ thread ]</a>
              <a href="subject.html#3721">[ subject ]</a>
              <a href="author.html#3721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've searched and found.

I've recompiled a tens of older versions of hatari between 1.4 and rev 
3150 (wich was already KO)
I've both compiled old and new CPU to do the tests.

So, with old CPU, moai.prg run until rev 3144. r=Rev 3145 is KO
with new cpu, moai.prg is always KO.

The change in this release was the way to compute DSP cycles from CPU 
cycles.
It has improved many prgs, so I won't touch it before the next release.

So, I'll still have to have a look at Falcon Timings to improve accuracy.

Regards

Laurent



It seems that moai as never worked with the new cpu (I thought I had 
tested it).

Le 13/07/2011 00:19, Nicolas Pomar&#232;de a &#233;crit :
&gt;<i> Le 13/07/2011 00:10, Laurent Sallafranque a &#233;crit :
</I>&gt;&gt;<i> I've recompiled the 1.4 from source to do some tests :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> moai in 1.4 version ran well, and sound was nice
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Moai in 1.5 version new cpu freeze after the loading screen and sound is
</I>&gt;&gt;<i> dirty
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> moai in 1.5 version old cpu freeze after the loading screen with no
</I>&gt;&gt;<i> sound at all
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've looked at crossbar.c, there's no major change between the 2
</I>&gt;&gt;<i> versions (except my new code for hadshake transfers at 32 Mhz, but not
</I>&gt;&gt;<i> it's not involved here).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think there's a major change somewhere that has downgraded sound in
</I>&gt;&gt;<i> some case (moai is a good example).
</I>&gt;&gt;<i> A falcon frequency ? some timings ? ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> what is hg bisect for ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> hg bisect is very useful to find where a problem was introuced.
</I>&gt;<i>
</I>&gt;<i> If you know rev A was OK and rev B was bad, but you don't know where 
</I>&gt;<i> the change happened, bisect is your friend :)
</I>&gt;<i>
</I>&gt;<i> First mark current rev as bad, for example &quot;hg bisect -b 3420&quot; ; mark 
</I>&gt;<i> hatari 1.4 as good &quot;hg bisec -g 2892&quot;. Now hg will revert sources to 
</I>&gt;<i> the &quot;middle&quot; of those 2 revs. Compile hatari, test and mark the result 
</I>&gt;<i> as good or bad with -g or -b (without a revision).
</I>&gt;<i>
</I>&gt;<i> Continue until you find the error, and  hg will tell you what revision 
</I>&gt;<i> caused the problem.
</I>&gt;<i>
</I>&gt;<i> So, you should find the cause in O(log(n)), which is quite efficient.
</I>&gt;<i>
</I>&gt;<i> Nicolas
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003795.html">[hatari-devel] Froggies over the fence
</A></li>
	<LI>Next message: <A HREF="003722.html">[hatari-devel] Moai demo as regressed a lot since hatari 1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3721">[ date ]</a>
              <a href="thread.html#3721">[ thread ]</a>
              <a href="subject.html#3721">[ subject ]</a>
              <a href="author.html#3721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
