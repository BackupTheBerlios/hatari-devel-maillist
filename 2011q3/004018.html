<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Old vs New CPU
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q3/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Old%20vs%20New%20CPU&In-Reply-To=%3C849175072.1329341.1317375366213.JavaMail.root%40mail-zstore-1-a.gicm.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004017.html">
   <LINK REL="Next"  HREF="004019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Old vs New CPU</H1>
    <B>LAURENT SALLAFRANQUE</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Old%20vs%20New%20CPU&In-Reply-To=%3C849175072.1329341.1317375366213.JavaMail.root%40mail-zstore-1-a.gicm.net%3E"
       TITLE="[hatari-devel] Old vs New CPU">laurent.sallafranque at arkea.com
       </A><BR>
    <I>Fri Sep 30 11:36:06 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004017.html">[hatari-devel] Old vs New CPU
</A></li>
        <LI>Next message: <A HREF="004019.html">[hatari-devel] Old vs New CPU
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4018">[ date ]</a>
              <a href="thread.html#4018">[ thread ]</a>
              <a href="subject.html#4018">[ subject ]</a>
              <a href="author.html#4018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the explanation.

&gt;<i> Btw all this math is nicely explained in 68030 UM, the paragraph above
</I>&gt;<i> specially on a page 11-25. Plus, I've tried to explain this calculation also
</I>&gt;<i> in my document about this, I'm so sorry it isn't that clear :)
</I>
No, no, I think I haven't taken enough time to read it all. :)
It's my only fault.

I'll work on this in the next weeks.
I think it is now the most important part of the emulation.



&gt;<i> ...if you manage to create complete text
</I>&gt;<i> (adressing modes etc)
</I>
Do you mean you need the declinaison of each instruction with each adressing mode ?
(I mean :

move.b d0,a0
move.b d0,(a0)
move.b d0,(A0)+
move.b d0,-(A0)
...

move.w d0,a0
move.w d0,(a0)
move.w d0,(A0)+
move.w d0,-(A0)
...
 
move.l d0,a0
move.l d0,(a0)
move.l d0,(A0)+
move.l d0,-(A0)
...

And the same for each instructions ?


Regards

Laurent

----- Mail original -----
De: &quot;LAURENT SALLAFRANQUE&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">laurent.sallafranque at arkea.com</A>&gt;
&#192;: &quot;hatari-devel&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">hatari-devel at lists.berlios.de</A>&gt;
Envoy&#233;: Vendredi 30 Septembre 2011 10:41:33
Objet: [hatari-devel] Old vs New CPU

Hi,

I'm currently working on the new cpu core :

For now, I'm merging to the latest winuae source (V2330).
I wish it'll full compile in the next days.

Then, I'll try to rework the 68030 clock, the MMU, ...

Mikro, for this, I really would need your cycles tables to compare what hatari gives as results in old and new cpu mode versus real hardware timings.

I've also detected some demos that run only with the old core, but in general, the new core gives better results.

I've tested 2 benchmarks (don't remember the names here).
One very interresting is about the FPP operations.

On my real falcon, it takes 13 seconds to complete
On hatari new core, it takes only 2 seconds.

So, in FPP emulation, cycles will have to be corrected.

I've also seen that RTS takes 2 cycles with the new Core. 
I'll write a case test program that use every one instruction (taken from the ascii file I've sent you Mikro) to get the cycles timings from a real hardware and Hatari.


First, timings should be the priority (as the CPU is the main clock for all the computer in Hatari).
Then, there's the Videl and all other stuff to improve.

Mikro, your help would be great here (at least with the 68030 cycles table).

For example, could you explain me in a few words how to read the numbers from the file I've sent you ?

cache     : x(y,z,t) 
non cache : a(b,c,d) 

how should I use these x y z t values ?

And what are the 2 numbers before ?


Ask me if you have some more questions.

Best regards,
Laurent

--
Ce message et  toutes les pieces jointes (ci-apres  le &quot;message&quot;) sont
confidentiels et etablis a l'intention exclusive de ses destinataires.
Toute  utilisation ou  diffusion  non autorisee  est interdite.   Tout
message  etant  susceptible  d'alteration,  l'emetteur  decline  toute
responsabilite au titre de  ce message  s'il a  ete altere, deforme ou
falsifie.
                -----------------------------------
This message and any  attachments (the &quot;message&quot;) are confidential and
intended  solely   for  the   addressees.  Any  unauthorised   use  or
dissemination is prohibited. As e-mails are susceptible to alteration,
the issuer shall  not be  liable for  the  message if altered, changed
or falsified.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004017.html">[hatari-devel] Old vs New CPU
</A></li>
	<LI>Next message: <A HREF="004019.html">[hatari-devel] Old vs New CPU
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4018">[ date ]</a>
              <a href="thread.html#4018">[ thread ]</a>
              <a href="subject.html#4018">[ subject ]</a>
              <a href="author.html#4018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
