<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] New STE DMA audio emulation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q3/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20New%20STE%20DMA%20audio%20emulation&In-Reply-To=%3C4E0EF6F5.2030904%40corp.free.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003629.html">
   <LINK REL="Next"  HREF="003634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] New STE DMA audio emulation</H1>
    <B>Nicolas Pomar&#232;de</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20New%20STE%20DMA%20audio%20emulation&In-Reply-To=%3C4E0EF6F5.2030904%40corp.free.fr%3E"
       TITLE="[hatari-devel] New STE DMA audio emulation">npomarede at corp.free.fr
       </A><BR>
    <I>Sat Jul  2 12:46:13 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003629.html">[hatari-devel] New STE DMA audio emulation
</A></li>
        <LI>Next message: <A HREF="003634.html">[hatari-devel] New STE DMA audio emulation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3630">[ date ]</a>
              <a href="thread.html#3630">[ thread ]</a>
              <a href="subject.html#3630">[ subject ]</a>
              <a href="author.html#3630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le 02/07/2011 12:38, Laurent Sallafranque a &#233;crit :
&gt;<i> There are 2 fifos in the Falcon DMA
</I>&gt;<i>
</I>&gt;<i> 1 32 bytes for DMA play
</I>&gt;<i> 1 32 bytes for DMA record.
</I>&gt;<i>
</I>&gt;<i> That point is a certitude (I've seen it in the compendium, STMagazine, ...)
</I>&gt;<i>
</I>&gt;<i> The way these 2 buffers are filled is described nowhere. I guess it
</I>&gt;<i> works in the HBL like the STe.
</I>
Yes, in that case, that's possible.

&gt;<i>
</I>&gt;<i> Until now, I thought I could bypass the 2 falcon DMA buffers (as we did
</I>&gt;<i> for the STe).
</I>&gt;<i> But as your adding of the STE buffer improves sound quality, I think I
</I>&gt;<i> should add the 2 buffers to the falcon too.
</I>
When I improved STE sound, adding the 8 byte fifo was really the last 
step, and although it improved quality, it was not the main part 
responsible for a better quality.

The main part was due to precisely counting every byte played on every 
frame, to check that it was consistent with the replay freq. That's why 
I think it would be an error to implement FIFO when sound is not already 
good in double buffer replay, it wouldn't improve this situation and it 
could add some complexity that will make it harder to get good sound.

First step (and the most tedious one) is really to &quot;print&quot; all output 
samples and compare this with the theorical output rate.

Nicolas

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003629.html">[hatari-devel] New STE DMA audio emulation
</A></li>
	<LI>Next message: <A HREF="003634.html">[hatari-devel] New STE DMA audio emulation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3630">[ date ]</a>
              <a href="thread.html#3630">[ thread ]</a>
              <a href="subject.html#3630">[ subject ]</a>
              <a href="author.html#3630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
