<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] start and break question
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q2/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20start%20and%20break%20question&In-Reply-To=%3C201106070045.45598.eerot%40users.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003541.html">
   <LINK REL="Next"  HREF="003552.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] start and break question</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20start%20and%20break%20question&In-Reply-To=%3C201106070045.45598.eerot%40users.berlios.de%3E"
       TITLE="[hatari-devel] start and break question">eerot at users.berlios.de
       </A><BR>
    <I>Mon Jun  6 23:45:45 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003541.html">[hatari-devel] start and break question
</A></li>
        <LI>Next message: <A HREF="003552.html">[hatari-devel] start and break question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3550">[ date ]</a>
              <a href="thread.html#3550">[ thread ]</a>
              <a href="subject.html#3550">[ subject ]</a>
              <a href="author.html#3550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On maanantai 06 kes&#228;kuu 2011, Nicolas Pomar&#232;de wrote:
&gt;<i> &gt; Currently the variable shows a value althought there's no program
</I>&gt;<i> &gt; running, so I was wondering should it return zero until the text
</I>&gt;<i> &gt; segment _size_ is also non-zero?
</I>&gt;<i> 
</I>&gt;<i> I'm not sure if it's not possible to craft a &quot;wrong&quot; prg header with 0
</I>&gt;<i> size and still have the tos to load it (I wonder if some packers are not
</I>&gt;<i> changing those values, can't recall).
</I>&gt;<i> 
</I>&gt;<i> Maybe you can just check also that :
</I>&gt;<i> 	BasepageTextSegment&gt;  0&amp;&amp;  pc = BasepageTextSegment &amp;&amp; (pc).w = $601a
</I>
Text segment doesn't contain the PRG file magic value ($601a), just code.

But I guess it should in general be enough just to use:
	b pc = BasepageTextSegment

Just remember to set it up only after desktop is up, otherwise it will
break once of twice before the Desktop comes up (the basepage of TOS
itself points to somewhere in ROM) and before TOS is fully initialized
the code will complain that basepage is invalid (several &quot;million&quot;
times with TOS4).


On maanantai 06 kes&#228;kuu 2011, Laurent Sallafranque wrote:
&gt;<i> This works well for me (I've tested with 2 progs).
</I>&gt;<i> That's a nice option.
</I>&gt;<i> Will you upload it ?
</I>
Commited with docs update.


	- Eero

PS There's now also new &quot;info cookiejar&quot; command for checking cookiejar
contents as it was only few additional lines.

(Maybe some other things from Atari &quot;sysinfo&quot; program would be nice too.)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003541.html">[hatari-devel] start and break question
</A></li>
	<LI>Next message: <A HREF="003552.html">[hatari-devel] start and break question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3550">[ date ]</a>
              <a href="thread.html#3550">[ thread ]</a>
              <a href="subject.html#3550">[ subject ]</a>
              <a href="author.html#3550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
