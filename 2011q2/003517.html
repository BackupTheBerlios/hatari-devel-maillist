<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Execution history debugger command
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q2/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Execution%20history%20debugger%20command&In-Reply-To=%3C201106020044.20585.eerot%40users.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003502.html">
   <LINK REL="Next"  HREF="003559.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Execution history debugger command</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Execution%20history%20debugger%20command&In-Reply-To=%3C201106020044.20585.eerot%40users.berlios.de%3E"
       TITLE="[hatari-devel] Execution history debugger command">eerot at users.berlios.de
       </A><BR>
    <I>Wed Jun  1 23:44:20 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003502.html">[hatari-devel] Execution history debugger command
</A></li>
        <LI>Next message: <A HREF="003559.html">[hatari-devel] Execution history debugger command
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3517">[ date ]</a>
              <a href="thread.html#3517">[ thread ]</a>
              <a href="subject.html#3517">[ subject ]</a>
              <a href="author.html#3517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On keskiviikko 01 kes&#228;kuu 2011, Nicolas Pomar&#232;de wrote:
&gt;<i> Le 31/05/2011 19:56, Eero Tamminen a &#233;crit :
</I>&gt;<i> &gt; Would it be more useful to have the history saved on breakpoints
</I>&gt;<i> &gt; instead of what I proposed?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To get information on branches with those, I would need a new kind of
</I>&gt;<i> &gt; breakpoint that is triggered only on branches which offset is larger
</I>&gt;<i> &gt; than &lt;limit&gt;.  Would that kind of breakpoint facility be useful for
</I>&gt;<i> &gt; you too?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I guess best way to do that would be to have an internal debugger
</I>&gt;<i> &gt; variable which value = abs(previous_pc - current_pc).  Any suggestions
</I>&gt;<i> &gt; for its name?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; :-)
</I>&gt;<i> 
</I>&gt;<i> Honestly, I never felt the need for some kind of &quot;branch breakpoint&quot;, a
</I>&gt;<i> problem is rarely related to branches only, you need the context of all
</I>&gt;<i> instructions before and after the branch, which in fact means you need
</I>&gt;<i> all instructions.
</I>&gt;<i>
</I>&gt;<i> Most of the time, when I want to debug complex problems, this can't be
</I>&gt;<i> limited to tracking a limited history. At one point, I need to go back
</I>&gt;<i> many VBLs in time, which means an history of 100000s instructions !
</I>
Hmm.  The things that I've looked lately have happened during several
seconds so there can easily be hundreds of VBLs worth of stuff to go 
through.  It's not really practical (at least to me) to approach that
through disassembly... :)


&gt;<i> So, my solution is to run &quot;hatari --trace cpu_all&quot;, which basically
</I>&gt;<i> gives you an history of all the instructions ; then I add breakpoints to
</I>&gt;<i> the places that make sense to me and this allows me to narrow the field
</I>&gt;<i> to the source of the problem by doing successive runs of Hatari.
</I>&gt;<i> 
</I>&gt;<i> With a rather long practice of asm, I think it's more efficient to get a
</I>&gt;<i> full trace up to the point of the crash, do a first analysis of the log
</I>&gt;<i> file, then add some breakpoints here and there and iterate.
</I>
With my limited experience with m68k asm it's easier for me to first limit
the amount of code to cover, add some breakpoints and only then start
reading disassembly.  I.e. do it from completely opposite direction...

With chained breakpoints that parse debugger input files, it's also now
fairly easy to have one breakpoint that enables tracing and another that
stops it.  With one more debugger input file to setup breakpoints at Hatari
startup (and memory snapshot if what you're after doesn't happen close to
boot), you can even automate this completely.


	- Eero

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003502.html">[hatari-devel] Execution history debugger command
</A></li>
	<LI>Next message: <A HREF="003559.html">[hatari-devel] Execution history debugger command
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3517">[ date ]</a>
              <a href="thread.html#3517">[ thread ]</a>
              <a href="subject.html#3517">[ subject ]</a>
              <a href="author.html#3517">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
