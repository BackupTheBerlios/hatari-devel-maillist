<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Execution history debugger command
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q2/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Execution%20history%20debugger%20command&In-Reply-To=%3C201106100114.42223.eerot%40users.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003517.html">
   <LINK REL="Next"  HREF="003495.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Execution history debugger command</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Execution%20history%20debugger%20command&In-Reply-To=%3C201106100114.42223.eerot%40users.berlios.de%3E"
       TITLE="[hatari-devel] Execution history debugger command">eerot at users.berlios.de
       </A><BR>
    <I>Fri Jun 10 00:14:42 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003517.html">[hatari-devel] Execution history debugger command
</A></li>
        <LI>Next message: <A HREF="003495.html">[hatari-devel] b help question (HBL $0)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3559">[ date ]</a>
              <a href="thread.html#3559">[ thread ]</a>
              <a href="subject.html#3559">[ subject ]</a>
              <a href="author.html#3559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I decided that the history thing should:

* Store only PC for DSP &amp; CPU, but for everything,
  not just breakpoint

* When being asked for history, show disassembly of
  instructions on these PC addresses


This can be utilized in breakpoints by automatically showing
the instructions leading to the breakpoint being hit, with
something like this:
	lock history 20
	b &lt;some condition&gt;  :trace :lock

This would, whenever given condition is hit, show the &quot;locked&quot;
information i.e. history of requested last 20 instructions and
then continue.

I can make it shoe that PC values/instructions that were shown by
previous breakpoint aren't repeated if breakpoint happens to hit more
often than at 20 instructions interval.


You can also ask more history in debugger and it will mark in
the output the places where breakpoints (or other debugger
entries) happened.


This will give with couple of extra code lines variables for
previous DSP &amp; CPU PC variable values which can be used e.g. to
find out jumps to some location that aren't loop jumps:
	b  pc = &lt;entry address&gt;  &amp;&amp;  PrevPcCpu ! &lt;loop jump address&gt;


	- Eero


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003517.html">[hatari-devel] Execution history debugger command
</A></li>
	<LI>Next message: <A HREF="003495.html">[hatari-devel] b help question (HBL $0)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3559">[ date ]</a>
              <a href="thread.html#3559">[ thread ]</a>
              <a href="subject.html#3559">[ subject ]</a>
              <a href="author.html#3559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
