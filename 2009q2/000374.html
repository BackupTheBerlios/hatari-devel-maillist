<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Conditional breakpoint code, please comment!
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2009q2/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Conditional%20breakpoint%20code%2C%20please%20comment%21&In-Reply-To=%3C200906142027.27202.eerot%40users.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000373.html">
   <LINK REL="Next"  HREF="000375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Conditional breakpoint code, please comment!</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Conditional%20breakpoint%20code%2C%20please%20comment%21&In-Reply-To=%3C200906142027.27202.eerot%40users.berlios.de%3E"
       TITLE="[hatari-devel] Conditional breakpoint code, please comment!">eerot at users.berlios.de
       </A><BR>
    <I>Sun Jun 14 19:27:27 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000373.html">[hatari-devel] Conditional breakpoint code, please comment!
</A></li>
        <LI>Next message: <A HREF="000375.html">[hatari-devel] Conditional breakpoint code, please comment!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#374">[ date ]</a>
              <a href="thread.html#374">[ thread ]</a>
              <a href="subject.html#374">[ subject ]</a>
              <a href="author.html#374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Sunday 14 June 2009, Thomas H. wrote:
&gt;<i> &gt; Thomas, Laurent &amp; Nicholas, could you comment on this stuff?
</I>&gt;<i>
</I>&gt;<i> Uuh, that's quite a lot of code, reviewing it completely will certainly
</I>&gt;<i> take some time...
</I>
I think the attached patches should be pretty straightforward.

Breakcond.c, especially the parser code is tricky though, but I can look
after that.  I've tried to document it adequately &amp; do things in logical
steps so that it's readable although it's large.  The tokenization step is
hairiest, but otherwise I think it should OK in this respect. The debug /
tracing output I added yesterday should also help if somebody needs to debug
the parser code.  The actual breakpoint matching should be much more
straightforward.


[...]
&gt;<i> &gt; &gt; Also, any objections if I:
</I>&gt;<i> &gt; &gt; - add tests/-directory to Hatari top level
</I>&gt;<i> &gt; &gt; - put the breakpoint condition testing code there + Makefile that
</I>&gt;<i> &gt; &gt;   automatically validates that breakpoint condition parsing works
</I>&gt;<i> &gt; &gt; fine?
</I>&gt;<i>
</I>&gt;<i> Isn't your main() function in breakcond.c already doing this job? Why a
</I>&gt;<i> separate directory for code that will go away later anyway?
</I>
The test code goes away from breakcond.c, but I thought it would be good
to keep it still around as breakcond.c is quite complicated.  It can be used
to find out regressions in the parser (if/when modifying it) and also for
easily Valgrinding the parser functionality.  It should cover all the parser
functionality.

There might be also other complicated things in Hatari which could profit
from regression tests, although writing automation code for them (e.g. DSP)
could be quite complicated...  Do you think Hatari could in future have
automated test code for other stuff?

(Just breakcond.c test code alone in tests/-dir could be silly.  :-))


&gt;<i> &gt; I also noticed that many headers (e.g. DSP ones) missed &quot;extern&quot;s
</I>&gt;<i> &gt; for functions.  Any objections on adding those?
</I>&gt;<i>
</I>&gt;<i> That's just cosmetics... I don't mind... but since most headers use the
</I>&gt;<i> &quot;extern&quot; keyword for prototypes, we should maybe do it consistently and
</I>&gt;<i> always use the &quot;extern&quot; keyword.
</I>
Thanks, I'll commit changes to those.


	- Eero

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000373.html">[hatari-devel] Conditional breakpoint code, please comment!
</A></li>
	<LI>Next message: <A HREF="000375.html">[hatari-devel] Conditional breakpoint code, please comment!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#374">[ date ]</a>
              <a href="thread.html#374">[ thread ]</a>
              <a href="subject.html#374">[ subject ]</a>
              <a href="author.html#374">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
