<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] GEMDOS HD emulation broken?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2009q4/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20GEMDOS%20HD%20emulation%20broken%3F&In-Reply-To=%3C89BA532D8C956043994C773C71153C92A8914D7122%40GVW1088EXB.americas.hpqcorp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001177.html">
   <LINK REL="Next"  HREF="001179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] GEMDOS HD emulation broken?</H1>
    <B>Konador, Cyprian</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20GEMDOS%20HD%20emulation%20broken%3F&In-Reply-To=%3C89BA532D8C956043994C773C71153C92A8914D7122%40GVW1088EXB.americas.hpqcorp.net%3E"
       TITLE="[hatari-devel] GEMDOS HD emulation broken?">cyprian.konador at hp.com
       </A><BR>
    <I>Thu Dec 31 01:59:38 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001177.html">[hatari-devel] GEMDOS HD emulation broken?
</A></li>
        <LI>Next message: <A HREF="001179.html">[hatari-devel] GEMDOS HD emulation broken?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Eero Tamminen
</I>
&gt;<i> &gt; TOS file/directory name should be 8+3, but current in 
</I>&gt;<i> release, GEMDOS
</I>&gt;<i> &gt; emulation do not trim longer name. And we can see following 
</I>&gt;<i> directories
</I>&gt;<i> &gt; under e.g. GEM's desktop:
</I>&gt;<i> &gt; LongFileName
</I>&gt;<i> &gt; BudgieDisks
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And finally I'm not able to open such a directory from 
</I>&gt;<i> fileselector in
</I>&gt;<i> &gt; Devpac.
</I>&gt;<i> 
</I>&gt;<i> Ah, so this is the actual problem.
</I>[...]
&gt;<i> I think I'm just going to truncate it to first 8 chars of the 
</I>&gt;<i> basename + 
</I>&gt;<i> extension.  If you really want to use Hatari on file system 
</I>&gt;<i> that contains
</I>&gt;<i> long file names, you should use MiNT.
</I>&gt;<i> 
</I>&gt;<i> Attached is a patch that does this, but the problem is that 
</I>&gt;<i> if anything else
</I>&gt;<i> is done to the name except straight truncation (like I now do), Hatari
</I>&gt;<i> doesn't find the file when the TOS asks for it.  It would 
</I>&gt;<i> need changes also
</I>&gt;<i> to the filename matching code (of which is a separate version 
</I>&gt;<i> for Windows
</I>&gt;<i> which somebody else needs to code, I can look only to the 
</I>&gt;<i> Unix version).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;     * Example: &quot;TextFile1.Mine.txt&quot; becomes &quot;TEXTFI~1.TXT&quot; (or
</I>&gt;<i> &gt; &quot;TEXTFI~2.TXT&quot;, should &quot;TEXTFI~1.TXT&quot; already exist). &quot;ver 
</I>&gt;<i> +1.2.text&quot;
</I>&gt;<i> &gt; becomes &quot;VER_12~1.TEX&quot;.
</I>&gt;<i> 
</I>&gt;<i> Does MicroSoft have patents on this? :-)
</I>
I have no idea :) but in Steem, GEM shows those directories as:
LONGFI~1
BUDGIE~1.OLD


&gt;<i> &gt; I didn't face that issue under Hatari v1.3.1.
</I>&gt;<i> &gt; The same behaviour under TOS1.62, 4.04, 3.06. - I'm not 
</I>&gt;<i> able to open such
</I>&gt;<i> &gt; a directory from neither desktop nor fileselector.
</I>&gt;<i> 
</I>&gt;<i> I cannot have that kind of files on Linux.  Smallest 
</I>&gt;<i> create/modify year
</I>&gt;<i> is 1970 (who really has digital files unmodified since?) and 
</I>&gt;<i> files with
</I>&gt;<i> dates larger than 2038 are set as 1970 (I think it means invalid).
</I>&gt;<i> 
</I>&gt;<i> But e.g. TOS 1.4 shows files from 1970 as 1980 and has no trouble
</I>&gt;<i> showing dirs with them (or 2038 files) or the contents of 
</I>&gt;<i> those files. 
</I>&gt;<i> Newer TOS versions don't have any issues either.
</I>&gt;<i> 
</I>&gt;<i> Sounds like your issue is something Windows specific.
</I>
Yep, It coudl be NTFS related issue (I use that kind of partition)
Actually, I'm not able to set manually date smaller than 1980-01-01 but 128CHESS.PRG extracted (with Total Commander) from that archive <A HREF="http://lineout.atari.org/crap/128chess.zip">http://lineout.atari.org/crap/128chess.zip</A> has  create/modify date has smaller than 1980.

In stderr.txt I see:
GEMDOS Fsnext(): Error setting DTA.

Funny things is that when I changed system date to 2050, Hatari immediately close after launching :)

Regards
Cyprian
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001177.html">[hatari-devel] GEMDOS HD emulation broken?
</A></li>
	<LI>Next message: <A HREF="001179.html">[hatari-devel] GEMDOS HD emulation broken?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
