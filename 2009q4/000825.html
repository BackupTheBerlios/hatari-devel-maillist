<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Troubles compiling latest Hatari with new avi	support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2009q4/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Troubles%20compiling%20latest%20Hatari%20with%20new%20avi%0A%09support&In-Reply-To=%3C200910110039.22804.eerot%40users.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000824.html">
   <LINK REL="Next"  HREF="000827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Troubles compiling latest Hatari with new avi	support</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Troubles%20compiling%20latest%20Hatari%20with%20new%20avi%0A%09support&In-Reply-To=%3C200910110039.22804.eerot%40users.berlios.de%3E"
       TITLE="[hatari-devel] Troubles compiling latest Hatari with new avi	support">eerot at users.berlios.de
       </A><BR>
    <I>Sat Oct 10 23:39:22 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000824.html">[hatari-devel] Troubles compiling latest Hatari with new avi support (fwd)
</A></li>
        <LI>Next message: <A HREF="000827.html">[hatari-devel] Troubles compiling latest Hatari with new avi	support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#825">[ date ]</a>
              <a href="thread.html#825">[ thread ]</a>
              <a href="subject.html#825">[ subject ]</a>
              <a href="author.html#825">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Sunday 11 October 2009, <A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">npomarede at corp.free.fr</A> wrote:
&gt;<i> &gt;&gt; This is fixed ; it mixed some old png animation recording with the new
</I>&gt;<i> &gt;&gt; avi mode, so button state was not correct.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Could you fix the whole recording thing?  None of the recording
</I>&gt;<i> &gt; stuff needs to be in the screenshot file anymore, right?
</I>&gt;<i>
</I>&gt;<i> Well it depends ; do we want to keep the &quot;save animation as png files&quot;
</I>&gt;<i> option ? If that's the case, we could put 3 buttons in screen dialog :
</I>&gt;<i>   - save screenshot
</I>&gt;<i>   - record screenshots animation
</I>&gt;<i>   - record avi
</I>&gt;<i>
</I>&gt;<i> If we completly drop the png animation support, then we can indeed remove
</I>&gt;<i> some parts from screenSnapShot.c related to incremeting the png file name
</I>&gt;<i> and saving a sequence of images.
</I>&gt;<i>
</I>&gt;<i> Does someone want to keep the record png animation option?
</I>
I'm not sure why somebody would want that.  One of the most annoying things
with recording is that you don't see from the UI where it's putting the
files.  When you notice it, you can have hundreds of PNG screenshots mixed
up with your normal screenshots.  Single file is much better. :-)

(And if somebody wants also a possibility to record just video, not sound,
I guess there could be a separate checkbox for that...)


&gt;<i> (note that's 
</I>&gt;<i> it's possible to extract the individual png files from the avi file using
</I>&gt;<i> mplayer/mencoder, so the png animation really seems redundant)
</I>
Btw. I just noticed that adding an index to the AVI when the recording
is stopped, can take quite a while (my recording wasn't that long in time,
but the file size was already several hundred MB).

I was thinking that there could be some DlgAlert_Show / _Hide function
that would allow code to do something while the dialog is on screen.
I'll look into that.


&gt;<i> &gt; Attached is a patch that makes AVI recording slightly more robust +
</I>&gt;<i> &gt; adds some missing static keywords (I don't understand why GCC didn't
</I>&gt;<i> &gt; complain about them.)
</I>&gt;<i>
</I>&gt;<i> Thanks, I will add these (except for the memset(AviParams,0) in
</I>&gt;<i> AviStopRecording_WithParams, as it will be done next time we start
</I>&gt;<i> another avi recording and would be redundant ; and setting AviRecording
</I>&gt;<i> to false (as it's already the case) will prevent from accessing AviParams
</I>&gt;<i> once recording is stopped,
</I>
Assuming the calling code checks that.  The code in the AviRecord*Stream*
functions doesn't check it.  And the AviRecord start function doesn't tell
the caller whether starting succeeded.

(The memset() is supposed to work with the else statements my patch
adds to those streaming functions, but you could e.g. just set the codec
selection and file pointer to nil.)


	- Eero

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000824.html">[hatari-devel] Troubles compiling latest Hatari with new avi support (fwd)
</A></li>
	<LI>Next message: <A HREF="000827.html">[hatari-devel] Troubles compiling latest Hatari with new avi	support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#825">[ date ]</a>
              <a href="thread.html#825">[ thread ]</a>
              <a href="subject.html#825">[ subject ]</a>
              <a href="author.html#825">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
