<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] latest version compil warnings
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2009q4/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20latest%20version%20compil%20warnings&In-Reply-To=%3C4B2AB93D.9000301%40free.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001111.html">
   <LINK REL="Next"  HREF="001113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] latest version compil warnings</H1>
    <B>Laurent Sallafranque</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20latest%20version%20compil%20warnings&In-Reply-To=%3C4B2AB93D.9000301%40free.fr%3E"
       TITLE="[hatari-devel] latest version compil warnings">laurent.sallafranque at free.fr
       </A><BR>
    <I>Fri Dec 18 00:05:33 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001111.html">[hatari-devel] latest version compil warnings
</A></li>
        <LI>Next message: <A HREF="001113.html">[hatari-devel] latest version compil warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1112">[ date ]</a>
              <a href="thread.html#1112">[ thread ]</a>
              <a href="subject.html#1112">[ subject ]</a>
              <a href="author.html#1112">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thomas Huth a &#233;crit :
&gt;<i> On Mon, 14 Dec 2009 21:17:20 +0100
</I>&gt;<i> Laurent Sallafranque &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">laurent.sallafranque at free.fr</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i> microphone.c doesn't include crossbar.h where this is declared.
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> You're right. I did copy/paste without looking at the messages (shame
</I>&gt;&gt;<i> on me :oD )
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> Do you have 64-bit OS &amp; CPU?
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;<i> (On 32-bit machines Sint64 == long long int)
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> Yes, 64 bits CPU and OS
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Ok, I've tried to fix the compiler warnings in cycInt.c now, please
</I>&gt;<i> check whether they are gone since I also only have a 32-bit system
</I>&gt;<i> where they do not occur.
</I>&gt;<i>
</I>&gt;<i> Concerning the compiler warnings in fpp-unknown.h, I am not sure how to
</I>&gt;<i> fix them yet... maybe we can peek from Aranym or WinUAE to see if they
</I>&gt;<i> have already fixed it there.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> By the way, I get some more compiler warnings in your code:
</I>&gt;<i>
</I>&gt;<i> microphone.c: In function &#8216;Microphone_Callback&#8217;:
</I>&gt;<i> microphone.c:73: warning: passing argument 1 of &#8216;Crossbar_GetMicrophoneDatas&#8217; from incompatible pointer type
</I>&gt;<i> crossbar.h:88: note: expected &#8216;Uint32 *&#8217; but argument is of type &#8216;short int (*)[64]&#8217;
</I>&gt;<i> microphone.c:73: warning: passing argument 2 of &#8216;Crossbar_GetMicrophoneDatas&#8217; from incompatible pointer type
</I>&gt;<i> crossbar.h:88: note: expected &#8216;Uint32 *&#8217; but argument is of type &#8216;short int (*)[64]&#8217;
</I>&gt;<i>
</I>&gt;<i> The code looks somewhat wrong to me. micro_buffer_L/R are arrays of
</I>&gt;<i> 16-bit shorts. The pointers to these arrays are casted to Uint32 * when
</I>&gt;<i> Crossbar_GetMicrophoneDatas() is being called -- and as far as I can see,
</I>&gt;<i> the arrays are used as 32-bit arrays there! Does this really work as
</I>&gt;<i> expected???
</I>&gt;<i>
</I>&gt;<i>  Thomas
</I>&gt;<i> _______________________________________________
</I>&gt;<i> hatari-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">hatari-devel at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">https://lists.berlios.de/mailman/listinfo/hatari-devel</A>
</I>&gt;<i>   
</I>For the microphone, I get correct sound (It seems to work).
But I'll try to cast in sint16 instead.
All the sound buffers should probably be 16 bits buffers instead of 32 
bits ones.

Don't hesitate to help me to write the crossbar code, it's a big part to 
code and there are still things to code here.

I'll try all the suggested things this week.

It's time to go to sleep now :).

regards,

Laurent



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001111.html">[hatari-devel] latest version compil warnings
</A></li>
	<LI>Next message: <A HREF="001113.html">[hatari-devel] latest version compil warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1112">[ date ]</a>
              <a href="thread.html#1112">[ thread ]</a>
              <a href="subject.html#1112">[ subject ]</a>
              <a href="author.html#1112">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
