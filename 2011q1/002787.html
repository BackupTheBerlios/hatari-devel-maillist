<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] DSP optimization?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q1/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20DSP%20optimization%3F&In-Reply-To=%3C201101151257.01306.oak%40helsinkinet.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002919.html">
   <LINK REL="Next"  HREF="002791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] DSP optimization?</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20DSP%20optimization%3F&In-Reply-To=%3C201101151257.01306.oak%40helsinkinet.fi%3E"
       TITLE="[hatari-devel] DSP optimization?">oak at helsinkinet.fi
       </A><BR>
    <I>Sat Jan 15 11:57:01 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002919.html">[hatari-devel] Mahabharata demo problem ?
</A></li>
        <LI>Next message: <A HREF="002791.html">[hatari-devel] DSP optimization?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2787">[ date ]</a>
              <a href="thread.html#2787">[ thread ]</a>
              <a href="subject.html#2787">[ subject ]</a>
              <a href="author.html#2787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Now that Hatari DSP code doesn't anymore track Aranym, could we change
the dsp_core to be a static array like CPU core data is?

Accessing the core through a pointer is a small overhead in about everything
DSP does and we don't gain anything from it as Hatari will never emulate
more than one DSP at the time (like AFAIK has been the idea with the Aranym
DSP code).


	- Eero

PS. I once even had a patch for that, but it's of course now out of date
and I don't remember whether I ever profiled it.

PPS. On quick &amp; short profiling, Mahabharata DSP bottlenecks seems to
be dsp_jclr_pp() and dsp56k_execute_instruction() functions, both of them
executing over 20% of all instructions.

(next ones are interrupt handling, m68k_go(), DSP_Run() with much smaller
percentages.)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002919.html">[hatari-devel] Mahabharata demo problem ?
</A></li>
	<LI>Next message: <A HREF="002791.html">[hatari-devel] DSP optimization?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2787">[ date ]</a>
              <a href="thread.html#2787">[ thread ]</a>
              <a href="subject.html#2787">[ subject ]</a>
              <a href="author.html#2787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
