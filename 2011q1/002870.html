<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Problem with NVDI and latest hatari sources
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q1/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Problem%20with%20NVDI%20and%20latest%20hatari%20sources&In-Reply-To=%3C20110123151433.GA6803%40quattro.seimet.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002869.html">
   <LINK REL="Next"  HREF="002953.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Problem with NVDI and latest hatari sources</H1>
    <B>Uwe Seimet</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Problem%20with%20NVDI%20and%20latest%20hatari%20sources&In-Reply-To=%3C20110123151433.GA6803%40quattro.seimet.de%3E"
       TITLE="[hatari-devel] Problem with NVDI and latest hatari sources">Uwe.Seimet at seimet.de
       </A><BR>
    <I>Sun Jan 23 16:14:33 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002869.html">[hatari-devel] Slow sound buffer
</A></li>
        <LI>Next message: <A HREF="002953.html">[hatari-devel] Problem with NVDI and latest hatari sources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2870">[ date ]</a>
              <a href="thread.html#2870">[ thread ]</a>
              <a href="subject.html#2870">[ subject ]</a>
              <a href="author.html#2870">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm sorry, but I could not respond sooner.

&gt;<i> &gt; Yes, I am. My extended VDI resolution is 1280x960x2 (TT high).
</I>
I meant 1280x960x1 (TT high, monochrome), by the way.
 
&gt;<i> Just to make sure, you're using the (default) UAE CPU core instead
</I>&gt;<i> of the new WinUAE CPU core, right?
</I>
Yes, I'm using the old CPU core.

&gt;<i> I guess the issue isn't reproducible if you disable extended VDI resolution
</I>&gt;<i> and e.g. use TT TOS and TT high resolution?
</I>
Yes, if I switch off the extended resolution in the config file before
starting Hatari the issue is gone. But in this case I have a different
problem: The Hatari window is placed elsewhere on the screen (looks as
if the Window manager now places the window at a location not yet used
by other windows) and the Hatari and X11 mouse cursor are not properly
synchronized anymore.
 
&gt;<i> Could you try switching ENABLE_TRACING to &quot;OFF&quot; from cmake configuration,
</I>&gt;<i> rebuild Hatari and see whether anything changes?
</I>
There is no change when setting ENABLE_TRACING to 0.

&gt;<i> And after TOS desktop was ready, pressed F12 and from &quot;Atari screen&quot; options
</I>&gt;<i> disabled VDI mode and in main options screen selected reset &amp; pressed OK. 
</I>&gt;<i> This worked fine with two different TOS versions.  Valgrind doesn't report
</I>&gt;<i> anything either.
</I>&gt;<i> 
</I>&gt;<i> Could you send your hatari.cfg file so that I can try whether I can
</I>&gt;<i> reproduce the issue with that?  Can you reproduce it if you don't
</I>&gt;<i> have anything started when the emulated machine boots?
</I>&gt;<i> What Hatari outputs when the emulation is reseted?
</I>
I have added my hatari.cfg as an attachment. During the reboot nothing
was running, i.e. TOS was still running its RAM test. This is the output
I get after disabling the extended VDI mode and returning to the main
menu:

Segmentation fault

The same happens if I chose &quot;No reset&quot; and click on &quot;OK&quot; when Hatari
tells me that a system reset is required to apply my changes.

BTW, all my comments refer to a clean build from todays Hatari sources
on a 64 bit Linux machine.

Best rgards

Uwe
 
-------------- next part --------------
[Log]
sLogFileName = stderr
sTraceFileName = stderr
nTextLogLevel = 4
nAlertDlgLogLevel = 1
bConfirmQuit = FALSE

[Screen]
nMonitorType = 0
nFrameSkips = 0
bFullScreen = FALSE
bAllowOverscan = FALSE
nSpec512Threshold = 16
nForceBpp = 0
bUseExtVdiResolutions = TRUE
nVdiWidth = 1280
nVdiHeight = 960
nVdiColors = 0
bShowStatusbar = FALSE
bShowDriveLed = FALSE
bAspectCorrect = TRUE
bCrop = FALSE
nMaxWidth = 832
nMaxHeight = 576

[Joystick0]
nJoystickMode = 0
bEnableAutoFire = FALSE
bEnableJumpOnFire2 = FALSE
nJoyId = 1
nKeyCodeUp = 273
nKeyCodeDown = 274
nKeyCodeLeft = 276
nKeyCodeRight = 275
nKeyCodeFire = 305

[Joystick1]
nJoystickMode = 0
bEnableAutoFire = FALSE
bEnableJumpOnFire2 = FALSE
nJoyId = 0
nKeyCodeUp = 273
nKeyCodeDown = 274
nKeyCodeLeft = 276
nKeyCodeRight = 275
nKeyCodeFire = 305

[Joystick2]
nJoystickMode = 0
bEnableAutoFire = FALSE
bEnableJumpOnFire2 = FALSE
nJoyId = 2
nKeyCodeUp = 273
nKeyCodeDown = 274
nKeyCodeLeft = 276
nKeyCodeRight = 275
nKeyCodeFire = 305

[Joystick3]
nJoystickMode = 0
bEnableAutoFire = FALSE
bEnableJumpOnFire2 = FALSE
nJoyId = 3
nKeyCodeUp = 273
nKeyCodeDown = 274
nKeyCodeLeft = 276
nKeyCodeRight = 275
nKeyCodeFire = 305

[Joystick4]
nJoystickMode = 0
bEnableAutoFire = FALSE
bEnableJumpOnFire2 = FALSE
nJoyId = 4
nKeyCodeUp = 273
nKeyCodeDown = 274
nKeyCodeLeft = 276
nKeyCodeRight = 275
nKeyCodeFire = 305

[Joystick5]
nJoystickMode = 0
bEnableAutoFire = FALSE
bEnableJumpOnFire2 = FALSE
nJoyId = 5
nKeyCodeUp = 273
nKeyCodeDown = 274
nKeyCodeLeft = 276
nKeyCodeRight = 275
nKeyCodeFire = 305

[Keyboard]
bDisableKeyRepeat = TRUE
nKeymapType = 1
szMappingFileName =

[ShortcutsWithModifiers]
keyOptions = 111
keyFullScreen = 102
keyMouseMode = 109
keyColdReset = 99
keyWarmReset = 114
keyScreenShot = 103
keyBossKey = 105
keyCursorEmu = 106
keyFastForward = 120
keyRecAnim = 97
keyRecSound = 121
keySound = 115
keyPause = 0
keyDebugger = 19
keyQuit = 113
keyLoadMem = 108
keySaveMem = 107
keyInsertDiskA = 100

[ShortcutsWithoutModifiers]
keyOptions = 293
keyFullScreen = 292
keyMouseMode = 0
keyColdReset = 0
keyWarmReset = 0
keyScreenShot = 0
keyBossKey = 0
keyCursorEmu = 0
keyFastForward = 0
keyRecAnim = 0
keyRecSound = 0
keySound = 0
keyPause = 19
keyDebugger = 0
keyQuit = 0
keyLoadMem = 0
keySaveMem = 0
keyInsertDiskA = 0

[Sound]
bEnableSound = FALSE
nPlaybackFreq = 44100
szYMCaptureFileName = /home/us/hatari.wav
bEnableMicrophone = TRUE
nSdlAudioBufferSize = 0

[Memory]
nMemorySize = 14
bAutoSave = FALSE
szMemoryCaptureFileName = /home/us/.hatari/hatari.sav
szAutoSaveFileName = /home/us/.hatari/auto.sav

[Floppy]
bAutoInsertDiskB = TRUE
bSlowFloppy = FALSE
nWriteProtection = 0
szDiskAZipPath =
szDiskAFileName =
szDiskBZipPath =
szDiskBFileName =
szDiskImageDirectory = /home/us/

[HardDisk]
bBootFromHardDisk = TRUE
bUseHardDiskDirectory = TRUE
szHardDiskDirectory = /home/us/TT.hatari
bUseHardDiskImage = FALSE
szHardDiskImage = /home/us/hatari/hd.img
bUseIdeMasterHardDiskImage = TRUE
bUseIdeSlaveHardDiskImage = FALSE
szIdeMasterHardDiskImage = /home/us/hatari/idetest.img
szIdeSlaveHardDiskImage = /home/us/hatari/ide1.img
nWriteProtection = 0

[ROM]
szTosImageFileName = /opt/src/atari/tos306de.img
szCartridgeImageFileName =

[RS232]
bEnableRS232 = FALSE
szOutFileName = /dev/modem
szInFileName = /dev/modem

[Printer]
bEnablePrinting = FALSE
bPrintToFile = TRUE
szPrintToFileName = /home/us/cd/hatari.out

[Midi]
bEnableMidi = FALSE
sMidiInFileName = /dev/snd/midiC1D0
sMidiOutFileName = /dev/snd/midiC1D0

[System]
nCpuLevel = 3
nCpuFreq = 32
bCompatibleCpu = FALSE
nMachineType = 2
bBlitter = FALSE
nDSPType = 0
bRealTimeClock = FALSE
bPatchTimerD = TRUE
bFastForward = FALSE

[Debugger]
nNumberBase = 10
nDisasmLines = 8
nMemdumpLines = 8

[Video]
AviRecordVcodec = 2
AviRecordFps = 0
AviRecordFile = /home/us/test/hatari/hatari.avi

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002869.html">[hatari-devel] Slow sound buffer
</A></li>
	<LI>Next message: <A HREF="002953.html">[hatari-devel] Problem with NVDI and latest hatari sources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2870">[ date ]</a>
              <a href="thread.html#2870">[ thread ]</a>
              <a href="subject.html#2870">[ subject ]</a>
              <a href="author.html#2870">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
