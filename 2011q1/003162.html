<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] FYI: new --desktop option
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q1/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20FYI%3A%20new%20--desktop%20option&In-Reply-To=%3C201103092254.30271.oak%40helsinkinet.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003161.html">
   <LINK REL="Next"  HREF="003163.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] FYI: new --desktop option</H1>
    <B>Eero Tamminen</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20FYI%3A%20new%20--desktop%20option&In-Reply-To=%3C201103092254.30271.oak%40helsinkinet.fi%3E"
       TITLE="[hatari-devel] FYI: new --desktop option">oak at helsinkinet.fi
       </A><BR>
    <I>Wed Mar  9 21:54:30 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003161.html">[hatari-devel] FYI: new --desktop option
</A></li>
        <LI>Next message: <A HREF="003163.html">[hatari-devel] FYI: new --desktop option
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3162">[ date ]</a>
              <a href="thread.html#3162">[ thread ]</a>
              <a href="subject.html#3162">[ subject ]</a>
              <a href="author.html#3162">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On keskiviikko 09 maaliskuu 2011, Christer Solskogen wrote:
&gt;<i> On Tue, Mar 8, 2011 at 7:20 PM, Eero Tamminen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">oak at helsinkinet.fi</A>&gt; wrote:
</I>&gt;<i> &gt; What's your Falcon resolution,  1, 2, 4, 8 or 16 bit?  And does the
</I>&gt;<i> &gt; issue happen both with Falcon HiColor and bitplane modes?
</I>&gt;<i> 
</I>&gt;<i> The same problem occurs when I use 4 color, 16 color, 256 color and True
</I>&gt;<i> Color. I don't start any application. I just boot the machine (no
</I>&gt;<i> autofolder or startup disk)
</I>
According to this SDL forum post, red and blue color channels have been 
swapped in later OSX versions:
<A HREF="http://forums.libsdl.org/viewtopic.php?t=5030&amp;sid=a24c2194e10c62be658d687ddd9eaa17">http://forums.libsdl.org/viewtopic.php?t=5030&amp;sid=a24c2194e10c62be658d687ddd9eaa17</A>

Looking at the Hatari code, all window updates should go through SDL color
mapping which should take care of this issue, unless the issue is in SDL.

You said that the issue happens only in 32-bpp mode, when switching
from fullscreen to windowed mode.  If it's possible that the color channel
order changes on OSX between in fullscreen &amp; windowed mode, it's possible
that palette color mappings could break for non-HiColor modes, but you're
saying that this issue happens also in HiColor which doesn't use palette...

If you switch back to fullscreen, do the colors get correct again?


&gt;<i> &gt; (I cannot reproduce the issue on Linux with either 16 or 32 Hatari bpp,
</I>&gt;<i> &gt; or any Falcon bit depth.)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; As far as I can see &quot;--desktop&quot; does absolutely nothing. I guess that
</I>&gt;<i> &gt;&gt; is a good thing :-)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; What's your desktop resolution and what you have configured as your max
</I>&gt;<i> &gt; Hatari zoom size?
</I>&gt;<i> 
</I>&gt;<i> By default max zoom size and my resolution is the same.
</I>
What is your desktop resolution?

If you use &quot;-z 1 --desktop&quot; and toggle fullscreen, does that change
anything?


	- Eero

Ps. While checking the Hatari code, I noticed it was redundantly doing per-
pixel Uint8 -&gt; Uint32 -&gt; Uint8 conversions for Videl updates, this is now
fixed.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003161.html">[hatari-devel] FYI: new --desktop option
</A></li>
	<LI>Next message: <A HREF="003163.html">[hatari-devel] FYI: new --desktop option
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3162">[ date ]</a>
              <a href="thread.html#3162">[ thread ]</a>
              <a href="subject.html#3162">[ subject ]</a>
              <a href="author.html#3162">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
