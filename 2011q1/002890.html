<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Higher precision when generating samples -&gt; use nanosleep
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2011q1/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Higher%20precision%20when%20generating%20samples%20-%3E%20use%0A%20nanosleep&In-Reply-To=%3C5860754.634864.1296066156129.JavaMail.nitido%40priv-edtnes94%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002954.html">
   <LINK REL="Next"  HREF="002893.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Higher precision when generating samples -&gt; use nanosleep</H1>
    <B>David Savinkoff</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Higher%20precision%20when%20generating%20samples%20-%3E%20use%0A%20nanosleep&In-Reply-To=%3C5860754.634864.1296066156129.JavaMail.nitido%40priv-edtnes94%3E"
       TITLE="[hatari-devel] Higher precision when generating samples -&gt; use nanosleep">dsavnkff at telus.net
       </A><BR>
    <I>Wed Jan 26 19:22:36 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002954.html">[hatari-devel] New CPU, MacOsX Build
</A></li>
        <LI>Next message: <A HREF="002893.html">[hatari-devel] Higher precision when generating samples -&gt; use nanosleep
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2890">[ date ]</a>
              <a href="thread.html#2890">[ thread ]</a>
              <a href="subject.html#2890">[ subject ]</a>
              <a href="author.html#2890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Jan 26, 2011, Nicolas Pomar&#232;de &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/hatari-devel">npomarede at corp.free.fr</A>&gt; wrote: 
</I>&gt;<i>
</I>&gt;<i> With nanosleep, we could get a much better granularity.
</I>&gt;<i>
</I>&gt;<i> We could define our own &quot;FineSleep&quot; function and uses the best possible 
</I>&gt;<i> alternatives depending on the OS / compilation flags (1st nanosleep, 
</I>&gt;<i> then SDL_Delay, active wait on SDL_GetTicks, etc.).
</I>&gt;<i>
</I>&gt;<i> I think it would fix the VBL precision problem with very few changes to 
</I>&gt;<i> Hatari. Any opinion on this ?
</I>
Hi,

I would like to see Hatari have the right amount of samples per VBL
for recording sound/video syncronization. This much should be done
without touching emulated-time/actual-time syncronization because
my patch takes care of this. Nanosleep makes the timing better but
still not exact because 'exact' is 'not possible'. My patch continuously
corrects the timing similar to driving a car (or helicopter) in a straight
line; you drive straight with 0 units of steering until you need to
correct with maybe -20 units of steering, then continue with 0 units,
then maybe 20 units, then 0, ... Note that this works so good that
it will prevent some potential hidden bugs from presenting symptoms.
Also, my patch will work with any timer precision on any computer.

David

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002954.html">[hatari-devel] New CPU, MacOsX Build
</A></li>
	<LI>Next message: <A HREF="002893.html">[hatari-devel] Higher precision when generating samples -&gt; use nanosleep
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2890">[ date ]</a>
              <a href="thread.html#2890">[ thread ]</a>
              <a href="subject.html#2890">[ subject ]</a>
              <a href="author.html#2890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
