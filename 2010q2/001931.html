<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [hatari-devel] Regression in falcon psg sound ?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/hatari-devel/2010q2/index.html" >
   <LINK REL="made" HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Regression%20in%20falcon%20psg%20sound%20%3F&In-Reply-To=%3C4BD60675.3020903%40free.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001928.html">
   <LINK REL="Next"  HREF="001933.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[hatari-devel] Regression in falcon psg sound ?</H1>
    <B>Laurent Sallafranque</B> 
    <A HREF="mailto:hatari-devel%40lists.berlios.de?Subject=Re%3A%20%5Bhatari-devel%5D%20Regression%20in%20falcon%20psg%20sound%20%3F&In-Reply-To=%3C4BD60675.3020903%40free.fr%3E"
       TITLE="[hatari-devel] Regression in falcon psg sound ?">laurent.sallafranque at free.fr
       </A><BR>
    <I>Mon Apr 26 23:32:37 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001928.html">[hatari-devel] Regression in falcon psg sound ?
</A></li>
        <LI>Next message: <A HREF="001933.html">[hatari-devel] Regression in falcon psg sound ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1931">[ date ]</a>
              <a href="thread.html#1931">[ thread ]</a>
              <a href="subject.html#1931">[ subject ]</a>
              <a href="author.html#1931">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, some musics are better, many more works, but some are a bit worse 
than in V1.
I thing there are still some more things to fix in the crossbar code.
(I'll have a falcon this summer, I'll be able to do some tests on the 
real hardware, great no ?)

I still don't know why (I suppose it's because I need precise 
frequencies and the relative timers
are based on cpu cycles (4 to 150+ cycles for a single instruction).

Nicolas, would it be possible to &quot;simulate&quot; a precise frequency without 
running &quot;by bus&quot; like in UAE ?
I mean : no need to run 2 cycles by 2 cycles for each component, I just 
need one 60 cycles or 80 cycles or xxx cycles for sound and DSP.

Let's say I need a 60 cycles instructions, if the &quot;timer&quot; counter is 56, 
it would call &quot;crossbar&quot; and DSP for &quot;56 cpu cycles&quot;.
Then, if next instruction is 24 cycles, timer would be 22 (60 - 58) and 
we would wait until timer reach 60 or becomes &quot;close to 60&quot;.

I don't know if this worth a try or if we should have the &quot;bus cycles 
precision&quot;.

The problem is that with video, there's no problem, as video's overscan 
are relative to CPU instructions.
But here, I need a precise and constant 60 cycles (or any other constant 
value) for sound frequency.

Maybe my problem is not here at all anyway.

I've tested &quot;Popstars&quot;, it sounds well.
I don't know why there's no sound in stocasto (perhaps there has never 
been sound in hatari with this demo)



I've got 2 version of vertical mayhem. The first one gives me immediatly 
a TOS error #35.
The second one works but I agree, sound is a bit noisy.
Again, I don't know why, because some other demos or games gives good 
sound with the same crossbar configuration.

Regards

Laurent


Eero Tamminen a &#233;crit :
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> On Monday 26 April 2010, Laurent Sallafranque wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> I thought I heard music in stocasto demo before (I thought it was
</I>&gt;&gt;<i> Yamaha's music).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't listen it anymore.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can somebody confirm if there's a regression here ?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I'm not sure e.g. what Vertical Mayhem+ (Columns clone) is using,
</I>&gt;<i> but it sounded much better in Hatari v1 Falcon emulation.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> Is there another Yahama's sound demo (or game) with wich I could do more
</I>&gt;&gt;<i> tests ?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Some of the ST music demos?
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.creamhq.de/ymrockerz/downloads.php">http://www.creamhq.de/ymrockerz/downloads.php</A>
</I>&gt;<i>
</I>&gt;<i> E.g. &quot;Popstars&quot; works in latest Hatari and e.g. in v1.0 (under Falcon
</I>&gt;<i> emulation), but didn't work in version few weeks ago.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 	- Eero
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001928.html">[hatari-devel] Regression in falcon psg sound ?
</A></li>
	<LI>Next message: <A HREF="001933.html">[hatari-devel] Regression in falcon psg sound ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1931">[ date ]</a>
              <a href="thread.html#1931">[ thread ]</a>
              <a href="subject.html#1931">[ subject ]</a>
              <a href="author.html#1931">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/hatari-devel">More information about the hatari-devel
mailing list</a><br>
</body></html>
